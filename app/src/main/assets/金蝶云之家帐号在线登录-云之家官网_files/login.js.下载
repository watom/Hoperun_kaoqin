requirejs.config({baseUrl:"/home/javascripts/src/client/",paths:{jquery:"frame/jquery-1.11.1.min",zepto:"frame/zepto.min",dialog:"public/dialog",header:"public/header",IScroll:"frame/iscroll",core:"public/core",login2:"public/login",source:"public/source",homeRigister:"public/home",countrySelect:"country-select",countryArray:"country-array",bindMobile:"public/bindmobile"},shim:{dialog:{deps:["jquery"]},cookie:{deps:["jquery"]},core:{deps:["jquery"]},login2:{deps:["core"]},homeRigister:{deps:["core","source"]},countrySelect:{deps:["IScroll","zepto"]},bindMobile:{deps:["jquery","countrySelect","dialog"]}},urlArgs:"201611151014001"}),requirejs(["jquery","countrySelect","bindMobile","core","login2","header","dialog"],function(l,e,a){var n,t,u=function(){var e={qrWrap:null,jumpUrl:"",qrUrl:"",token:"",pollingGap:2,socketReq:"",onGetQrFailed:null,onSocketMsg:null};function o(o){this._opts=l.extend(e,o),this._qrWrap=l(this._opts.qrWrap),this.init()}return o.prototype={init:function(){var o=this;this.getQrcode(),setInterval(function(){o.getQrcode()},9e4),this.checkIe()&&setInterval(function(){location.reload()},22e4)},checkIe:function(){var o=navigator.userAgent,e=-1<o.indexOf("Edge");return-1<o.indexOf("MSIE")||e},getQrcode:function(){var n=this;l.ajax({url:n._opts.qrUrl,type:"get",dataType:"json",success:function(o){var e=o;e.success?(n.generateQr(e.data.url),n._opts.token=e.data.token,"function"==typeof WebSocket&&n._opts.socketReq?n.socketComm(e.data.token):n.polling(n._opts.pollingUrl+e.data.token+"&time="+(new Date).getTime())):n._opts.onGetQrFailed.call(n)},error:function(){n._opts.onGetQrFailed.call(n)}})},generateQr:function(o){var e=this._qrWrap,n=e.children("img");n.length?n.attr("src",o):(n=l('<img src="'+o+'"/>'),e.append(n))},polling:function(o){var n,t=this;n=setInterval(function(){l.ajax({url:o,type:"get",dataType:"json",success:function(o){var e=o;e.success?t.successJump():102===e.errorcode&&clearInterval(n)}})},1e3*t._opts.pollingGap)},socketComm:function(e){var n=this,o=new WebSocket(n._opts.socketReq+e);o.onopen=function(){o.onmessage=function(o){"function"==typeof n._opts.onSocketMsg?n._opts.onSocketMsg.call(n):"success"===o.data&&l.ajax({url:n._opts.pollingUrl+e+"&time="+(new Date).getTime(),type:"get",dataType:"json",success:function(o){var e=o;e.success?n.successJump():e.errorcode}})}},o.onclose=function(){},o.onerror=function(){n.polling(n._opts.pollingUrl+e+"&time="+(new Date).getTime())}},successJump:function(){window.location.href=this._opts.jumpUrl}},o}();t=!1,l("#jsCountryPanel").on("click",function(o){t||(t=!0,n=e(function(o){l("#jsCountryPanel .country-panel-code").text(o.code),l("#jsCountryPanel .country-panel-name").text(o.country),l("#jsCountryPanel").removeClass("active")})),l("#jsCountryPanel").hasClass("active")?(l("#jsCountryPanel").removeClass("active"),n.hide()):(l("#jsCountryPanel").addClass("active"),n.show()),o.stopPropagation()}),l("#jsCountryList").on("click",function(o){return o.stopPropagation(),!1}),l(document).on("click",function(){l("#jsCountryList").hide(),l("#jsCountryPanel").removeClass("active")});l(function(){var o,e,n,t,c,i,r,s;o=l(".login-content"),e=o.find(".user-name"),n=o.find(".qrcode"),(t=o.find(".login-scan-qrcode")).children(".login-qrcode"),t.find(".qr-wrap"),t.children(".scan-guid"),c=o.find(".login-wrap .ui-form-large"),i=o.find(".login-wrap .bind-mobile-tips"),r=o.find(".login-content-foot"),s={block:{display:"block"},none:{display:"none"}},769<document.body.clientWidth&&(e.click(function(){l(this).css({"border-bottom":"3px solid #3cbaff",color:"#3cbaff"}).next().css(s.block).css({"border-bottom":"none",color:"#818181"}),c.css(s.block).prev().css(s.none),r.css(s.block)}),n.click(function(){l(this).css({"border-bottom":"3px solid #3cbaff",color:"#3cbaff"}).prev().css(s.block).css({"border-bottom":"none",color:"#818181"}),c.css(s.none).prev().css(s.block),i.css(s.none),r.css(s.block)})),wpLogin.init(),a.init(),new u({qrWrap:".qr-wrap",qrUrl:"/space/c/getloginercode?time="+(new Date).getTime(),jumpUrl:"/im/xiaoxi",socketReq:(location.protocol.match("https")?"wss://":"ws://")+location.hostname+"/space/qrloginsocket?token=",pollingUrl:"/space/c/checkloginstatus?token=",onGetQrFailed:function(o){l(".login-switch.qrcode").css("border-bottom","none");var e=l(".login-content"),n=e.find(".login-title"),t=e.find(".login-switch"),c=e.find(".login-scan-qrcode"),i=e.find(".login-wrap .ui-form-large");t.eq(0).css({display:"block",borderBottom:"3px solid rgb(60, 186, 255)"}),c.css("display","none"),i.css("display","block"),n.css({textAlign:"center"})}})})});